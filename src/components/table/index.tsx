/* eslint-disable @typescript-eslint/no-explicit-any */
import { useState } from "react";
import DataTable, { TableColumn } from "react-data-table-component";

interface TableProps {
  data: any[];
  columns: TableColumn<any>[];
}

const paginationComponentOptions = {
  rowsPerPageText: "Registros por página",
  rangeSeparatorText: "de",
  selectAllRowsItem: true,
  selectAllRowsItemText: "Todos",
};

const CustomPagination = ({
  rowsPerPage,
  rowCount,
  currentPage,
  setPage,
}: any) => {
  const totalPages = Math.ceil(rowCount / rowsPerPage);

  const handlePageChange = (newPage: number) => {
    setPage(newPage);
  };

  return (
    <div className="flex gap-2 bg-blue-500 mt-2 rounded-lg text-white justify-end p-2">
      <span>
        Página {currentPage} de {totalPages} |
      </span>
      <button
        className="hover:underline"
        onClick={() => handlePageChange(currentPage - 1)}
        disabled={currentPage === 0}
      >
        Anterior
      </button>
      <button
        className="hover:underline"
        onClick={() => handlePageChange(currentPage + 1)}
        disabled={currentPage === totalPages - 1}
      >
        Próxima
      </button>
    </div>
  );
};

const Table = ({ data, columns }: TableProps) => {
  const [searchText, setSearchText] = useState<string>("");
  const [currentPage, setCurrentPage] = useState<number>(1);

  const handleSearch = (text: string) => {
    setSearchText(text);
    setCurrentPage(1);
  };

  const filteredData = data.filter((item) =>
    Object.values(item).some(
      (value) =>
        typeof value === "string" &&
        value.toLowerCase().includes(searchText.toLowerCase())
    )
  );

  // const customStyles = {
  //   TableHeadRow:{
  //     style:{
  //       backgroundColor: "transparent",
  //     }
  //   },
  //   rows: {
  //     style: {
  //       minHeight: "62px",
  //       display: "flex",
  //       flexDirection: "row",
  //       alignItems: "center",
  //       justifyContent: "center",
  //     },
  //   },
  //   headCells: {
  //     style: {
  //       paddingLeft: "8px",
  //       paddingRight: "8px",
  //       backgroundColor: "#94c2fa",
  //       color: "#fff",
  //       borderRadius: "8px",
  //       margin: "4px",
  //       flexDirection: "row",
  //       alignItems: "center",
  //       justifyContent: "center",
  //     },
  //   },
  //   cells: {
  //     style: {
  //       paddingLeft: "8px",
  //       paddingRight: "8px",
  //       backgroundColor: "#60a5fa",
  //       color: "#fff",
  //       borderRadius: "8px",
  //       height: "40px",
  //       margin: "4px",
  //       display: "flex",
  //       justifyContent: "center",
  //     },
  //   },
  // };
  return (
    <div className="rounded-lg">
      <div className="flex items-center mb-4 gap-2 w-full">
        <input
          type="text"
          placeholder="Pesquisar"
          value={searchText}
          onChange={(e) => handleSearch(e.target.value)}
          className="p-2 border rounded-lg w-full hover:border-blue-700 hover:border focus:outline-none"
        />
        <button
          onClick={() => ({})}
          className="bg-white h-10 border text-blue-600 border-blue-600 rounded-lg px-5 hover:bg-blue-700 hover:text-white"
        >
          Buscar
        </button>
      </div>
      <DataTable
        columns={columns}
        data={filteredData}
        // customStyles={customStyles}
        pagination
        paginationPerPage={10}
        paginationTotalRows={filteredData.length}
        paginationDefaultPage={currentPage}
        paginationComponentOptions={paginationComponentOptions}
        paginationComponent={CustomPagination}
        onChangePage={(page) => setCurrentPage(page)}
      />
    </div>
  );
};
export default Table;
